syntax = "proto3";

package go.micro.srv.agv;

service Agv {
  //获取一个AGV数据//
  rpc GetAgvByID(AgvReq) returns (AgvMessage);
  //获取所有的AGV数据//
  rpc GetAgvs(Query) returns (AgvsResponse);
  //急停单台AGV//
  rpc StopAgvByID(AgvReq) returns (Response);
  //急停所有AGV//
  rpc StopAgvs(Request) returns (Response);
}

message Query{
  uint32 garageID = 1;
  uint32 page = 2;
  uint32 perPage = 3;
}

message Request{
  uint32 garageID = 1;
}

message Response{
  string message = 1;
}

message AgvMessage {
  uint32 id = 1;
  uint32 type  = 2;
  uint32 x = 3;
  uint32 y = 4;
  uint32 angle  = 5;
  uint32 point  = 6;
  uint32 segment   = 7;
  uint32 battery  = 8;
  uint32 plc  = 9;
  uint32 status  = 10;
}

message AgvReq {
  uint32 garageID = 1;
  uint32 agvID = 2;
}

message AgvsResponse{
  repeated AgvMessage agvs = 1;
}
